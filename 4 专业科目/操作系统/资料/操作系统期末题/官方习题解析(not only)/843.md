4
(20140606-期末考试试题&参考答案.docx)信号量应用
(15分)假设一个MOOC网站有1、2、3三种不同的课程视频可由学生选择学习，网站播放课程视频的规则为：
1）任一时刻最多只能播放一种课程视频，正在播放的课程视频是自动循环播放的，最后一个学生主动离开时结束当前课程视频的播放；
2）选择当前正在播放的课程视频的学生可立即进入播放页面，允许同时有多位选择同一种课程视频的学生观看，同时观看的学生数量不受限制；
3）等待观看其它课程视频的学生按到达顺序排队，当一种新的课程视频开始放映时，所有等待观看该课程视频的学生可依次序进入播放页面同时观看。
用一个进程代表一个学生，要求：用信号量的P、V操作实现上述规则，并给出信号量的定义和初始值。  
- [x]

知识点:信号量
出处:网络
难度:1
> 信号量和变量：（6分，信号量数组，每个2分，其他每个量1分）
> i取值范围为0～2
> m[3]是三个信号量，初始值为1,用于保护对count[i]的读写。
> sem_g是一个信号量，初始值为1,代表当前是否可以播放视频
> count[3]是三个统计值，初始值为0,代表看视频i的人数
> 代码：（9分，其中三个PV对，每个2分；两个计数修改，每个计数1分；条件1分；）
>     ```
>     Procedure student(i)
>     {
>         down(m[i]);
>         if count[i]==0 {
>             down（sem_g);
>         }
>         count[i]++;
>         up(m[i]);
>         // into Critical Section
>         // watch video
>         // out Critical Section
>         down(m[i]);
>         count[i]--;
>         if count[i]==0{
>             up(sem_g);
>         }
>         up(m[i]);
>     }
>     ```
