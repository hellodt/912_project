4
"一个文件系统中有一个20MB大文件和一个15KB小文件,当分别采用二级索引和UNIX Sytem V
分配方案时(每块大小为2048B,每块地址用4B表示)，问: (1)各文件系统管理的最大的文件是多少?
(2)每种方案对大、小二文件各需要多少专用块来记录文件的物理地址(说明各块的用途) ?
(3)如需要读大文件前面第5.5KB和后面（16M＋5.5KB）信息，则每个方案各需要多少次盘I/O操作? "
- [x]  

> 知识点：文件系统。
> 出处：网络
> 难度：1
> (1)各种分配方案的文件系统可管理的最大文件 ① 二级索引：由于盘块大小为2KB，每个地址用4B表示，一个盘块可存0.5K个索引表目，二级索引可管理的最大文
> 件容量为2KB×0.5K×0.5K＝0.5GB。（三级索引可管理的最大文件容量为2KB×0.5K×0.5K×0.5K＝0.25TB。） ②
> UNIX混合分配：可管理的最大文件为2KB×(10+0.5K+0.5K×0.5K+0.5K×0.5K×0.5K)=
> 20KB＋1MB+0.5GB＋0.25TB。 (2)每种分配方案对20MB大文件和15KB小文件各需要多少专用块来记录文件的物理地址? ① 二级索引：对大小
> 文件都固定要用二级索引，对15KB小文件，用一块作第一级索引，用另一块作二级索引，共用二块专用物理块作索引块，对于20MB大文件，用一块作第一级索引，用20
> 块作第二级索引，共用21块专用物理块作索引块。 ② UNIX的混合分配：对15KB小文件只需在文件控制块FCB的i_addr[13]中使用前8个表目存放文件
> 的物理块号，不需专用物理块。对20MB大文件，FCB的i_addr[13]中使用前10个表目存放大文件前10块物理块块号，用一级索引块一块保存大文件接着的0
> .5K块块号，还要用二级索引存大文件以后的块号，二级索引使用第一级索引1块，第二级索引19块。总共也需要21块专用物理块来存放文件物理地址。
> (3)为读大文件前面第5.5KB和后面第（16M＋5.5KB）信息需要多少次盘I/O操作? ①二级索引：为读大文件前面和后面信息的操作相同，首先进行一次盘I
> ／O读第一级索引块，然后根据它的相对逻辑块号计算应该读第二级索引的那块，再化一次盘I／O读出信息所在盘块，这样读取大文件前面或后面信息都只需要3次盘I／O操
> 作。 ②UNIX混合分配：为读大文件前面5.5KB信息，先根据它的相对逻辑块号，在内存文件控制块FCB的i_addr[13]第二个表目中读取信息所在块块号，
> 而只化费一次盘I／O操作即可读出该块信息。为读大文件后在（16MB＋5。5KB）信息，先根据它的相对逻辑块号判断它是在UNIX二级索引管理范围，先根据i_a
> ddr[11]内容化一次盘I／O操作读出第一级索引块取得二级索引表项所在盘块号，第二次读出第二级索引块，就可以得到信息所在块块号，最后化一次盘I／O读出信息
> 所在盘块，这样总共需要3次盘I／O操作才能读出文件后面的信息。 二级索引 UNIX 管理最大文件 0.5GB 20KB＋1MB+0.5GB＋0.25TB
> 管理用的 专用块数 15KB文件 2 0 20MB文件 21 21 读20MB文件某处信息 5.5KB 2+1 1 16MB+5.5KB 2+1 2+1
