4
(20140606-期末考试试题&参考答案.docx)文件系统
(12分)uCore实现了一个简单的文件系统Simple FS，假设该文件系统现已经装载到一个硬盘中（disk0）, 该硬盘的大小为20M,
目前有三个文件A.txt,B.txt和C.txt存放在该硬盘中，三个文件的大小分别是48K, 1M和4M。
1）简要描述SFS文件系统中文件数据的组织结构（即：SFS文件的数据的存放位置组织方式）。
2）请根据Simple FS的设计实现情况，画出该文件系统当前在disk0上的布局情况，需要给出相应结构的名称和起始块号。  
- [x]  

> 知识点：文件系统实验。
> 出处：网络
> 难度：1
> 1) 一个superblock维护基本信息（1'），多个freemap（数量由分区大小确定，1'），一个根目录inode（1'）；
> 目录和文件均由一个inode和具体数据块组成，其中inode包含文件的基本属性、12个直接索引和一级/二级索引表的块地址（1'），目录的数据块中存放（文件名
> 、inode地址）的数组（1'），文件的数据块中存放文件的具体内容（1'）。
> 2）（除了0、1、2以外，其它块地址均可变，言之有理即可）
> （2分）
> 0 superblock
> 1 根目录inode
> 2 freemap（640K，只需要1块）
> 3 根目录的数据块（包含A.txt、B.txt、C.txt的inode的地址）
> （1分）
> 4 A.txt的inode（包含12个直接索引块的地址）
> 5-16 A.txt的数据块
> （2分）
> 17 B.txt的inode（包含12个直接索引块和1个一级间接索引）
> 18-29 B.txt的直接索引数据
> 30 B.txt的一级间接索引（包含244个数据块地址）
> 31-274 B.txt的一级间接索引块
> （1分）
> 275 C.txt的inode（包含12个直接索引块和1个一级间接索引）
> 276-287 C.txt的一级间接索引块
> 288 C.txt的一级间接索引（包含1012个数据块地址）
> 289-1300 C.txt的一级间接索引块  
